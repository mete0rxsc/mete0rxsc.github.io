import{r as u,d as v,o as y,R as _,L as f,aa as b,M as g,N as L,O as C,a3 as T,y as E,_ as $}from"./framework.B3-meWAy.js";const H={__name:"LinkInterceptor",setup(h){const o=u([]),s=u([]),a=u(!1),l=async()=>{try{const t=await(await fetch("/link-whitlist.json")).json();a.value=t.enable,t.links&&(o.value=t.links),t.domain&&(s.value=t.domain)}catch(e){console.error("Failed to load whitelist:",e)}},c=e=>{try{if(!e||e.startsWith("#")||e.startsWith("javascript:")||new URL(e,window.location.origin).pathname==="/external-link.html")return!1;const n=i=>new URL(i).hostname.replace("www.","");return n(window.location.href)!==n(e)}catch{return!1}},d=e=>{try{const t=new URL(e).hostname.replace("www.","");return s.value.some(n=>{const i=new URL(n).hostname.replace("www.","");return t===i})}catch{return!1}},r=e=>{e.preventDefault();const t=e.currentTarget.href;console.log("Opening external link:",t);const i=document.documentElement.classList.contains("dark")?"dark":"normal",w=btoa(t);window.open(`/external-link.html?url=${w}&mode=${i}`,"_blank")},m=()=>{document.querySelectorAll("a").forEach(e=>{if(c(e.href)&&!e.classList.contains("no-intercept")){if(a.value&&(o.value.includes(e.href)||d(e.href))||e.dataset.intercepted)return;e.dataset.intercepted=!0,e.addEventListener("click",r)}})};return v(async()=>{await l(),m();let e;new MutationObserver(()=>{clearTimeout(e),e=setTimeout(()=>m(),100)}).observe(document.body,{childList:!0,subtree:!0})}),y(()=>{document.querySelectorAll("a").forEach(e=>{e.dataset.intercepted&&(e.removeEventListener("click",r),delete e.dataset.intercepted)})}),(e,t)=>_(" 这是一个无渲染组件 ")}},W={name:"TitleChanger",data(){return{originalTitle:document.title,isHidden:!1}},mounted(){setTimeout(()=>{this.originalTitle=document.title},100),document.addEventListener("visibilitychange",this.handleVisibilityChange),window.addEventListener("blur",this.handleWindowBlur),window.addEventListener("focus",this.handleWindowFocus)},beforeDestroy(){document.removeEventListener("visibilitychange",this.handleVisibilityChange),window.removeEventListener("blur",this.handleWindowBlur),window.removeEventListener("focus",this.handleWindowFocus),document.title=this.originalTitle},methods:{handleVisibilityChange(){document.hidden?(this.isHidden=!0,document.title="(^///^)不要走！再看看嘛！"):(this.isHidden=!1,document.title=this.originalTitle)},handleWindowBlur(){this.isHidden||(document.title="(^///^)不要走！再看看嘛！")},handleWindowFocus(){this.isHidden||(document.title=this.originalTitle)}}};function k(h,o,s,a,l,c){return _(" 这是一个无渲染组件，不需要模板内容 ")}const p=f(W,[["render",k]]),x=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"})),O={name:"TitleChanger",components:{ClientOnlyTitleChanger:b(()=>$(()=>Promise.resolve().then(()=>x),void 0))}};function D(h,o,s,a,l,c){const d=p,r=g("ClientOnly");return C(),L(r,null,{default:T(()=>[E(d)]),_:1})}const M=f(O,[["render",D]]);export{M as S,H as _};
