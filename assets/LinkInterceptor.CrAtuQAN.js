import{r as c,d as m,R as h}from"./framework.B3-meWAy.js";const f={__name:"LinkInterceptor",setup(p){const o=c([]),s=c(!1),l=async()=>{try{const t=await(await fetch("/link-whitlist.json")).json();s.value=t.enable,t.links&&(o.value=t.links)}catch(e){console.error("Failed to load whitelist:",e)}},d=e=>{try{if(!e||e.startsWith("#")||e.startsWith("javascript:")||new URL(e,window.location.origin).pathname==="/external-link.html")return!1;const n=r=>new URL(r).hostname.replace("www.","");return n(window.location.href)!==n(e)}catch{return!1}},a=e=>{e.preventDefault();const t=e.currentTarget.href;console.log("Opening external link:",t);const r=document.documentElement.classList.contains("dark")?"dark":"normal",u=btoa(t);window.open(`/external-link.html?url=${u}&mode=${r}`,"_blank")},i=()=>{document.querySelectorAll("a").forEach(e=>{if(d(e.href)&&!e.classList.contains("no-intercept")){if(s.value&&o.value.includes(e.href))return;e.removeEventListener("click",a),e.addEventListener("click",a)}})};return m(async()=>{await l(),i();let e;new MutationObserver(()=>{clearTimeout(e),e=setTimeout(()=>i(),100)}).observe(document.body,{childList:!0,subtree:!0})}),(e,t)=>h(" 这是一个无渲染组件 ")}};export{f as _};
