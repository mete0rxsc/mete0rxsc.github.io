import{o as R,p as q,_ as j,l as F,s as B,q as H,r as W,t as O,v as U,w as K,e as X,f as J}from"./app.C6wKU63y.js";import{f as g,P as c,O as o,S as i,W as D,L as T,R as p,r as y,d as P,V as b,N as $,a3 as I,Y as k,$ as G,u as _,F as Y,U as z,y as u,a2 as E,c as N,w as Q,X as S,M as Z}from"./framework.B3-meWAy.js";import"./chunks/dayjs.Byk5cVHE.js";import{g as V}from"./animation.BmKSPrMr.js";import{a as tt}from"./chunks/vue-router.C0q7ndeJ.js";import{_ as et,S as nt}from"./StayPleaseTitle.DGrqQMXV.js";import"./chunks/vue-i18n.DYdeeex7.js";import"./chunks/pinia.CaogHvnm.js";import"./chunks/@vueuse/motion.jISeQ3Au.js";import"./chunks/nprogress.Cino7761.js";const st={class:"w-full px-4 flex-center"},ot={class:"yun-notice w-full"},at=["innerHTML"],rt=g({__name:"YunNotice",props:{content:{}},setup(d){return(t,e)=>(o(),c("div",st,[i("div",ot,[i("span",{innerHTML:t.content},null,8,at),D(t.$slots,"default")])]))}}),it={},ct={class:"grid-bg"};function lt(d,t){return o(),c("div",ct,[p(" <YunAEFrame /> "),p(" <YunAERect /> ")])}const ut=T(it,[["render",lt]]),pt={class:"say"},_t={key:0,class:"say-content animate-fade-in animate-iteration-1"},mt={key:1,class:"say-author"},dt={key:2,class:"say-from"},ft=g({__name:"YunSay",setup(d){const t=R(),e=y(""),n=y(""),a=y("");function m(){const r=t.value.say.hitokoto.enable?t.value.say.hitokoto.api:t.value.say.api;r&&fetch(r).then(l=>{if(l.ok)l.json().then(f=>{if(t.value.say.hitokoto.enable)e.value=f.hitokoto,n.value=f.from_who,a.value=f.from;else{const h=f[Math.floor(Math.random()*f.length)];h.content?(e.value=h.content,n.value=h.author,a.value=h.from):e.value=h}});else throw new Error(`${t.value.say.api}, HTTP error, status = ${l.status}`)}).catch(l=>{console.error(l.message)})}return P(()=>{m()}),(r,l)=>(o(),c("div",pt,[e.value?(o(),c("span",_t,b(e.value),1)):p("v-if",!0),n.value?(o(),c("span",mt,b(n.value),1)):p("v-if",!0),a.value?(o(),c("span",dt,b(a.value),1)):p("v-if",!0)]))}}),ht=g({__name:"YunSiteLinkItem",props:{page:{}},setup(d){const t=q();return(e,n)=>{const a=j;return o(),$(a,{class:"link-item inline-flex-center gap-2 transition rounded-lg text-xl p-2 md:text-lg md:p-2 lg:text-xl lg:p-3 text-$va-c-text",bg:"white/5 dark:black/5","inline-flex":"",to:e.page.url,title:e.page.name,style:G(`color:${e.page.color}`),hover:"bg-white/80 dark:bg-black/80",onClick:n[0]||(n[0]=m=>_(t).fullscreenMenu.isOpen=!1)},{default:I(()=>[i("div",{class:k([e.page.icon,"icon"])},null,2),i("span",null,b(e.page.name),1)]),_:1},8,["to","title","style"])}}}),vt={key:0,class:"site-description text-$va-c-text text-sm"},yt=g({__name:"YunSiteDescription",setup(d){const t=F();return(e,n)=>_(t).description?(o(),c("div",vt,b(_(t).description),1)):p("v-if",!0)}}),gt={key:0,class:"site-subtitle block text-$va-c-text op-80 font-medium",text:"sm"},bt=g({__name:"YunSiteSubtitle",setup(d){const t=F();return(e,n)=>_(t).subtitle?(o(),c("h4",gt,b(_(t).subtitle),1)):p("v-if",!0)}}),wt=g({__name:"YunAnimLineDraw",setup(d){const t=y(!1);return P(()=>{t.value=!0}),(e,n)=>(o(),c("div",{class:k(["line",{enter:t.value}])},null,2))}}),xt=T(wt,[["__scopeId","data-v-61df0b18"]]),$t={key:0,class:"site-author-intro",m:"t-0 b-4"},kt=g({__name:"YunAuthorIntro",setup(d){const t=F();return(e,n)=>_(t).author.intro?(o(),c("div",$t,b(_(t).author.intro),1)):p("v-if",!0)}}),Ct={key:0,class:"line-burst-effects absolute"},Yt=g({__name:"LineBurstEffects",props:{delay:{},duration:{}},setup(d){const t=d,e=y(!0);return P(async()=>{await B(t.delay),e.value=!1,await B(t.duration),e.value=!0}),(n,a)=>e.value?p("v-if",!0):(o(),c("div",Ct,[(o(),c(Y,null,z(8,m=>i("div",{key:m,class:"line"},a[0]||(a[0]=[i("div",null,[i("span")],-1)]))),64))]))}}),Mt={flex:"~ col",class:"yun-square-container items-center justify-center text-center max-w-2xl"},St={flex:"~ col",class:"yun-square square-rotate z-1 bg-white/80"},It={class:"py-4 md:py-5 lg:pt-6"},Lt={flex:"~ col",class:"gap-2 items-center justify-center"},Nt={class:"scale-x--100 py-4 md:py-5 lg:pb-6"},Pt={class:"mt-4 flex-center w-72 md:w-150 m-auto gap-2",flex:"~ wrap"},Dt=g({__name:"YunPrologueSquare",setup(d){const t=R(),e=y(!1);return(n,a)=>{const m=Yt,r=H,l=W,f=kt,h=xt,M=O,C=bt,v=yt,s=U,w=ht;return o(),c("div",Mt,[D(n.$slots,"default",{},void 0,!0),i("div",{flex:"~ col center",class:k(["info-with-avatar relative duration-800 transition-cubic-bezier-ease-in",{show:e.value}])},[u(E,{"enter-from-class":"enter-from","enter-to-class":"enter-to",appear:"",onAfterAppear:a[0]||(a[0]=x=>e.value=!0)},{default:I(()=>[i("div",St,[u(m,{class:"absolute top-0 left-0 right-0 bottom-0 size-full scale-200",delay:200,duration:400}),u(E,{"enter-from-class":"op-0","enter-to-class":"op-100","enter-active-class":"transition-400 delay-400",appear:""},{default:I(()=>[u(r)]),_:1})])]),_:1}),i("div",{class:k(["info",{show:e.value}])},[u(l,{class:"mt-3"}),u(f),i("div",It,[u(h)]),i("div",Lt,[u(M,{style:{color:"white"}}),u(C,{style:{color:"white"}}),u(v,{style:{color:"white"}})]),i("div",Nt,[u(h)]),u(s),i("div",Pt,[u(w,{page:{name:"博客文章",icon:"i-ri-article-line",url:"/posts/"}}),D(n.$slots,"default",{},void 0,!0),(o(!0),c(Y,null,z(_(t).pages,(x,L)=>(o(),$(w,{key:L,page:x},null,8,["page"]))),128))])],2)],2)])}}}),Et=T(Dt,[["__scopeId","data-v-28fded2b"]]),At=g({__name:"YunGoDown",setup(d){return(t,e)=>(o(),c("button",{class:"go-down w-20 bottom-0 text-sm md:bottom-2 md:text-40px","aria-label":"go-down",onClick:e[0]||(e[0]=(...n)=>_(V)&&_(V)(...n))},e[1]||(e[1]=[i("div",{"i-ri-arrow-down-s-fill":"","inline-flex":""},null,-1)])))}}),Bt={class:"banner-char-container"},Rt={class:"char"},Tt=g({__name:"YunBannerCharContainer",props:{title:{},chars:{}},setup(d){return(t,e)=>(o(),c("div",Bt,[(o(!0),c(Y,null,z(t.title,(n,a)=>(o(),c("div",{key:a,class:"char-box"},[i("span",{class:k([a%2!==0?"char-right":"char-left"]),style:G({"--banner-char-size":`${t.chars[a]}rem`})},[i("span",Rt,b(n),1)],6)]))),128))]))}});function qt(d){const t=N(()=>{const n=[];for(let a=0;a<d.title.length;a++){const m=K(1.5,3.5);n.push(m)}return n}),e=N(()=>t.value.reduce((n,a)=>n+a,0));return{chars:t,totalCharHeight:e}}const Ft={class:"banner-line-container"},Gt={class:"banner-line-container bottom"},zt=g({__name:"YunBanner",setup(d){const t=q(),e=R(),{totalCharHeight:n,chars:a}=qt(e.value.banner),m=N(()=>{const h={"--total-char-height":`${n.value}rem`,"--banner-line-height":`calc(var(--banner-height, 100 * var(--vh)) / 2 - ${n.value/2}rem)`,"justify-content":"space-between"};return t.isStrato&&(h.borderBottom="1px solid var(--banner-line-color)"),h}),r=y("enter"),l=N(()=>r.value),f=y("banner");return P(async()=>{await B(500),r.value="active",t.isNimbo&&(await B(500),r.value="exit",f.value="prologue")}),(h,M)=>{const C=Tt,v=At;return o(),c("div",{id:"yun-banner",border:"b-1px b-solid b-$banner-line-color",style:G(m.value)},[i("div",Ft,[i("div",{class:k(["banner-line vertical-line-top",l.value])},null,2)]),_(t).isNimbo?(o(),c(Y,{key:0},[f.value==="banner"?(o(),$(C,{key:0,title:_(e).banner.title,chars:_(a)},null,8,["title","chars"])):p("v-if",!0)],64)):p("v-if",!0),_(t).isStrato?(o(),$(C,{key:1,title:_(e).banner.title,chars:_(a)},null,8,["title","chars"])):p("v-if",!0),i("div",Gt,[i("div",{class:k(["banner-line vertical-line-bottom",l.value])},null,2)]),u(v)],4)}}}),Vt=g({__name:"DomainCheck",setup(d){return P(()=>{const t="www.xscnas.top",e="https://www.xscnas.top",n=document.location.hostname;function a(m){const r=document.createElement("div");r.style.pointerEvents="none",r.style.position="fixed",r.style.top="0",r.style.left="0",r.style.width="100%",r.style.height="100%",r.style.zIndex="9999",r.style.opacity="0.1",r.style.background="transparent",r.style.overflow="hidden",r.style.display="flex",r.style.justifyContent="center",r.style.alignItems="center",r.style.flexWrap="wrap";const l=document.createElement("div");l.innerText=m,l.style.color="black",l.style.fontSize="30px",l.style.transform="rotate(-30deg)",l.style.whiteSpace="nowrap",l.style.margin="20px";for(let f=0;f<100;f++)r.appendChild(l.cloneNode(!0));document.body.appendChild(r)}if(n==="localhost"){console.log("Completely: 当前处于本地开发环境 (localhost)");return}else n==="xscnas.top"?(console.log("Completely: 已经跳转到官方域名 (www.xscnas.top)"),window.location.replace(e)):n==="github.xscnas.top"?(a(t),console.log("Completely: 当前访问的是 GitHub 镜像站 (github.xscnas.top)，出现此原因可能是CDN检测到主站连接问题，自动切换到备用Github站，这并不代表你一定不能使用主站，点击确定即可自动跳转主站，如点击确定后仍然跳转为Github站，请联系站长Mete0r_xsc@hotmail.com，以协助排查问题，建议您跳转至官网 (www.xscnas.top) 进行浏览！"),confirm("提示：您当前访问的是 GitHub 镜像站，出现此原因可能是CDN检测到主站连接问题，自动切换到备用Github站，这并不代表你一定不能使用主站，点击确定即可自动跳转主站，如点击确定后仍然跳转为Github站，请联系站长Mete0r_xsc@hotmail.com，以协助排查问题，建议您跳转至官网 (www.xscnas.top) 进行浏览！")&&window.location.replace(e)):n!==t&&(a(t),confirm("提示：您当前浏览的页面不是正版(或者站点已经迁移域名)，建议您跳转至官方(www.xscnas.top)进行浏览！如果不是博主的域名及时留言反馈Mete0r_xsc@hotmail.com，博主域名为：www.xscnas.top")&&window.location.replace(e))}),(t,e)=>p(" 这个组件不需要模板内容，因为它主要是通过脚本逻辑来操作DOM ")}}),jt={key:0,class:"notice-bar"},Ht={class:"notice-content"},Wt={key:0},Ot={key:1},Ut={class:"city"},Kt={class:"greeting"},Xt={class:"distance"},Jt={class:"distance"},Qt={class:"ip"},Zt=g({__name:"NoticeBar",setup(d){const t=y(""),e=y(""),n=y(""),a=y(""),m=y(""),r=y(!0),l=y(""),f=y(!0),h=async()=>{try{const s=await(await fetch("https://api.kuleu.com/api/getGreetingMessage?type=json")).json();if(s.code===200)m.value=s.data.greeting+" "+s.data.tip;else throw new Error("Failed to get greeting message")}catch(v){console.error("Error:",v),m.value="早上好，美好的一天又开始了😎"}};P(async()=>{try{const w=await(await fetch("https://api.nsmao.net/api/ipip/query?key=lHY1oFqNOseVmtH1tk6GNVbNh8")).json();t.value=w.ip,e.value=`${w.data.country} ${w.data.province} ${w.data.city}`||"未知地区";const x={lat:parseFloat(w.data.lat)||0,lng:parseFloat(w.data.lng)||0};if(x.lat===0&&x.lng===0)throw new Error("无法获取有效的经纬度信息");const L={lat:42.9094,lng:129.4718};n.value=M(L,x).toFixed(2);const A={lat:39.7461,lng:116.4991};a.value=M(A,x).toFixed(2),await h()}catch(s){l.value="无法加载公告信息，请稍后重试。刷新后如果问题仍然存在，请通过Mete0r_xsc@hotmail.com联系我，也有可能是因为在IP检测部分遇到了障碍，系统监测不到您的IP对应的城市，所以返回了错误，不过这不耽误您对网站的浏览，如有兴趣，可检查自己的IP是否能查询到对应的城市,检测API： https://api.nsmao.net/api/ipip/geo/v1/query?key=[API_KEY]",console.error("Error:",s)}finally{r.value=!1}const v=()=>{const s=document.documentElement.classList.contains("dark");document.documentElement.style.setProperty("--notice-bg-color",s?"rgba(128, 128, 128, 0.75)":"rgba(255, 255, 255, 0.75)"),document.documentElement.style.setProperty("--notice-text-color",s?"#fff":"#000"),document.documentElement.style.setProperty("--close-button-color",s?"#fff":"#666")};v(),Q(()=>document.documentElement.classList.contains("dark"),v)});function M(v,s){const x=(s.lat-v.lat)*Math.PI/180,L=(s.lng-v.lng)*Math.PI/180,A=Math.sin(x/2)*Math.sin(x/2)+Math.cos(v.lat*Math.PI/180)*Math.cos(s.lat*Math.PI/180)*Math.sin(L/2)*Math.sin(L/2);return 6371*(2*Math.atan2(Math.sqrt(A),Math.sqrt(1-A)))}function C(){f.value=!1}return(v,s)=>(o(),$(E,{name:"slide"},{default:I(()=>[f.value?(o(),c("div",jt,[i("div",Ht,[i("button",{class:"close-button",onClick:C},"×"),s[8]||(s[8]=i("h3",null,"公告",-1)),r.value?(o(),c("p",Wt,"加载中...")):l.value?(o(),c("p",Ot,b(l.value),1)):(o(),c(Y,{key:2},[s[6]||(s[6]=i("p",null,[S("欢迎来到Mete0r的博客！有任何问题请联系邮箱: "),i("a",{href:"mailto:Mete0r_xsc@hotmail.com"},"Mete0r_xsc@hotmail.com")],-1)),s[7]||(s[7]=i("p",null,"🎉 欢迎信息 🎉",-1)),i("p",null,[s[0]||(s[0]=S("  欢迎来自 ")),i("span",Ut,b(e.value),1),s[1]||(s[1]=S(" 的小伙伴，")),i("span",Kt,b(m.value),1),s[2]||(s[2]=S(" 您现在距离站长约 ")),i("span",Xt,b(n.value),1),s[3]||(s[3]=S(" 公里，距离博客服务器约 ")),i("span",Jt,b(a.value),1),s[4]||(s[4]=S(" 公里。当前的IP地址为： ")),i("span",Qt,b(t.value),1),s[5]||(s[5]=S("，祝您在我的博客里玩的开心！"))])],64))])])):p("v-if",!0)]),_:1}))}}),te=T(Zt,[["__scopeId","data-v-a56c3e7d"]]),ee={class:"w-full"},ne={class:"absolute top-0 left-5 right-5 bottom-0 flex-center"},se={key:1,class:"h-$yun-nav-height"},fe=g({__name:"home",setup(d){const t=q(),e=tt(),n=R(),a=N(()=>e.path.startsWith("/page")),m=N(()=>{const r=n.value.notice;return r.enable&&(a.value?!r.hideInPages:!0)});return(r,l)=>{const f=zt,h=Et,M=ft,C=ut,v=rt,s=Z("RouterView"),w=X,x=J;return o(),c(Y,null,[u(Vt),p(" 使用DomainCheck "),u(te),p(" 使用NoticeBar "),u(et),p(" 使用LinkInterceptor "),u(nt),p(" 使用StayPleaseTitle "),u(w,{class:k(["items-center flex-col",{"mt-0!":!a.value}])},{default:I(()=>[_(n).banner.enable?(o(),c(Y,{key:0},[a.value?p("v-if",!0):(o(),c(Y,{key:0},[i("div",ee,[u(f),_(t).isNimbo?(o(),$(E,{key:0,"enter-from-class":"scale-60","enter-to-class":"scale-100","enter-active-class":"transition-300 transition-cubic-bezier-ease-in-out delay-1000",appear:""},{default:I(()=>[i("div",ne,[u(E,{"enter-from-class":"op-0","enter-to-class":"op-100","enter-active-class":"transition-800 delay-1000",appear:""},{default:I(()=>[u(h,{class:"z-1"})]),_:1})])]),_:1})):p("v-if",!0),_(n).say.enable?(o(),$(M,{key:1,w:"full"})):p("v-if",!0)]),_(t).isNimbo?(o(),$(C,{key:0,class:"absolute left-0 top-0 right-0 bottom-0"})):p("v-if",!0)],64))],64)):(o(),c("div",se)),m.value?(o(),$(v,{key:2,class:k(["mb-2 md:mb-6",{"mt-4":!a.value}]),content:_(n).notice.content},null,8,["class","content"])):p("v-if",!0),D(r.$slots,"board"),D(r.$slots,"default",{},()=>[u(s)])]),_:3},8,["class"]),u(x)],64)}}});export{fe as default};
