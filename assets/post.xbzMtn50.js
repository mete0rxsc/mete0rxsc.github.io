import{l as L,u as E,x as R,b as S,y as D,c as F,h as W,e as B,f as N}from"./app.BQ406hGD.js";import{f as b,c as $,P as y,O as r,S as i,R as m,V as f,u as a,N as g,r as w,d as j,M as z,y as c,a3 as h,a7 as A,W as H,F as O}from"./framework.B3-meWAy.js";import{u as I}from"./chunks/vue-i18n.DYdeeex7.js";import{_ as q}from"./YunSponsor.vue_vue_type_style_index_0_lang.C8R0MJnp.js";import{_ as G,a as J,b as K}from"./YunPostMeta.vue_vue_type_style_index_0_lang.BcjdAy8Z.js";import{d as C}from"./chunks/dayjs.Byk5cVHE.js";import"./chunks/vue-router.DlZxEEZq.js";import"./chunks/pinia.CaogHvnm.js";import"./chunks/@vueuse/motion.jISeQ3Au.js";import"./chunks/nprogress.Cino7761.js";import"./index.BrSYCNQw.js";import"./animation.BmKSPrMr.js";const Q={class:"post-copyright"},X={class:"post-copyright-author"},Z={key:0,class:"post-copyright-link"},ee=["href","title"],te={class:"post-copyright-license"},oe=["innerHTML"],ne=b({__name:"ValaxyCopyright",props:{url:{default:""}},setup(v){const{t,locale:o}=I(),s=L(),l=s.value.license.type==="zero"?"1.0":"4.0",u=s.value.license.type==="zero"?"publicdomain":"licenses",p=$(()=>{const n=s.value.license.language?s.value.license.language:o.value==="zh-CN"?"zh":"en";return`https://creativecommons.org/${u}/${s.value.license.type}/${l}/deed.${n}`}),e=$(()=>t("post.copyright.license_content",[`<a href="${p.value}" target="_blank" rel="noopener" title="CC ${`${s.value.license.type.toUpperCase()} ${l}`} ">CC ${s.value.license.type.toUpperCase()}</a>`]));return(n,_)=>(r(),y("ul",Q,[i("li",X,[i("strong",null,f(a(t)("post.copyright.author")+a(t)("symbol.colon")),1),i("span",null,f(a(s).author.name),1)]),n.url?(r(),y("li",Z,[i("strong",null,f(a(t)("post.copyright.link")+a(t)("symbol.colon")),1),i("a",{href:n.url,target:"_blank",title:a(t)("post.copyright.link")},f(decodeURI(n.url)),9,ee)])):m("v-if",!0),i("li",te,[i("strong",null,f(a(t)("post.copyright.license_title")+a(t)("symbol.colon")),1),i("span",{innerHTML:e.value},null,8,oe)])]))}}),se={class:"inline-flex",text:"sm",py:"1"},ae={key:1,mx:"2"},re=b({__name:"YunPostCategoriesAndTags",props:{frontmatter:{}},setup(v){return(t,o)=>{const s=G,l=J;return r(),y("div",se,[t.frontmatter.categories?(r(),g(s,{key:0,categories:t.frontmatter.categories},null,8,["categories"])):m("v-if",!0),t.frontmatter.categories&&t.frontmatter.tags?(r(),y("span",ae)):m("v-if",!0),t.frontmatter.tags?(r(),g(l,{key:2,tags:t.frontmatter.tags},null,8,["tags"])):m("v-if",!0)])}}}),le={__name:"LinkInterceptor",setup(v){const t=w([]),o=w(!1),s=async()=>{try{const n=await(await fetch("/link-whitlist.json")).json();o.value=n.enable,n.links&&(t.value=n.links)}catch(e){console.error("Failed to load whitelist:",e)}},l=e=>{try{if(!e||e.startsWith("#")||e.startsWith("javascript:")||new URL(e,window.location.origin).pathname==="/external-link.html")return!1;const _=d=>new URL(d).hostname.replace("www.","");return _(window.location.href)!==_(e)}catch{return!1}},u=e=>{e.preventDefault();const n=e.currentTarget.href;console.log("Opening external link:",n);const d=document.documentElement.classList.contains("dark")?"dark":"normal",k=btoa(n);window.open(`/external-link.html?url=${k}&mode=${d}`,"_blank")},p=()=>{document.querySelectorAll("a").forEach(e=>{if(l(e.href)&&!e.classList.contains("no-intercept")){if(o.value&&t.value.includes(e.href))return;e.removeEventListener("click",u),e.addEventListener("click",u)}})};return j(async()=>{await s(),p();let e;new MutationObserver(()=>{clearTimeout(e),e=setTimeout(()=>p(),100)}).observe(document.body,{childList:!0,subtree:!0})}),(e,n)=>m(" 这是一个无渲染组件 ")}},ke=b({__name:"post",setup(v){const t=L(),o=E(),s=R(),l=$(()=>typeof o.value.sponsor=="boolean"?o.value.sponsor:t.value.sponsor.enable),u={"@type":"BlogPosting",headline:o.value.title,description:o.value.description,author:[{name:t.value.author.name,url:t.value.author.link}],datePublished:C(o.value.date||"").toDate(),dateModified:C(o.value.updated||"").toDate()},p=o.value.image||o.value.cover;return p&&(u.image=p),S(D(u)),(e,n)=>{const _=F,d=K,k=re,Y=q,M=ne,P=z("RouterView"),T=W,U=B,V=N;return r(),y(O,null,[c(U,null,{default:h(()=>[c(_),c(le),c(P,null,{default:h(({Component:x})=>[(r(),g(A(x),null,{"main-header-after":h(()=>[c(d,{frontmatter:a(o)},null,8,["frontmatter"]),c(k,{class:"mt-2",frontmatter:a(o)},null,8,["frontmatter"])]),"main-content-after":h(()=>[l.value?(r(),g(Y,{key:0,m:"t-6"})):m("v-if",!0),a(o).copyright||a(o).copyright!==!1&&a(t).license.enabled?(r(),g(M,{key:1,url:a(s),m:"y-4"},null,8,["url"])):m("v-if",!0)]),"aside-custom":h(()=>[H(e.$slots,"aside-custom")]),_:2},1024))]),_:3}),c(T)]),_:3}),c(V)],64)}}});export{ke as default};
