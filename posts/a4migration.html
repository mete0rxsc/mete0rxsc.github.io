<!DOCTYPE html><html lang="en" data-beasties-container><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.png"><script>!function(){const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><style type="text/css">:root{color-scheme:light dark;--va-c-bg:#fff}html{background-color:var(--va-c-bg)}*,:after,:before{box-sizing:border-box;border-width:0;border-style:solid;border-color:var(--un-default-border-color,#e5e7eb)}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}h1,h2,h3,h4{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}strong{font-weight:bolder}code,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}button,input{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button{text-transform:none}button{-webkit-appearance:button;background-image:none}blockquote,figure,h1,h2,h3,h4,p,pre{margin:0}ul{list-style:none;margin:0;padding:0}input::placeholder{opacity:1;color:#9ca3af}button{cursor:pointer}img{display:block;vertical-align:middle}img{max-width:100%;height:auto}body{counter-reset:katexEqnNo mmlEqnNo}:root{--va-c-border:#c2c2c4;--va-c-divider:#e2e2e3;--va-c-gutter:#e2e2e3}:root{--va-c-gray-1:#dddde3;--va-c-gray-2:#e4e4e9;--va-c-gray-3:#ebebef;--va-c-gray-soft:rgba(142, 150, 170, .14);--va-c-indigo-1:#3451b2;--va-c-indigo-2:#3a5ccc;--va-c-indigo-3:#5672cd;--va-c-indigo-soft:rgba(100, 108, 255, .14);--va-c-green-1:#18794e;--va-c-green-2:#299764;--va-c-green-3:#30a46c;--va-c-green-soft:rgba(16, 185, 129, .14);--va-c-yellow-1:#915930;--va-c-yellow-2:#946300;--va-c-yellow-3:#9f6a00;--va-c-yellow-soft:rgba(234, 179, 8, .14);--va-c-red-1:#b8272c;--va-c-red-2:#d5393e;--va-c-red-3:#e0575b;--va-c-red-soft:rgba(244, 63, 94, .14);--va-c-sponsor:#db2777}:root{--va-c-default-1:var(--va-c-gray-1);--va-c-default-2:var(--va-c-gray-2);--va-c-default-3:var(--va-c-gray-3);--va-c-default-soft:var(--va-c-gray-soft);--va-c-brand-1:var(--va-c-indigo-1);--va-c-brand-2:var(--va-c-indigo-2);--va-c-brand-3:var(--va-c-indigo-3);--va-c-brand-soft:var(--va-c-indigo-soft);--va-c-brand:var(--va-c-brand-1);--va-c-tip-1:var(--va-c-brand-1);--va-c-tip-2:var(--va-c-brand-2);--va-c-tip-3:var(--va-c-brand-3);--va-c-tip-soft:var(--va-c-brand-soft);--va-c-warning-1:var(--va-c-yellow-1);--va-c-warning-2:var(--va-c-yellow-2);--va-c-warning-3:var(--va-c-yellow-3);--va-c-warning-soft:var(--va-c-yellow-soft);--va-c-danger-1:var(--va-c-red-1);--va-c-danger-2:var(--va-c-red-2);--va-c-danger-3:var(--va-c-red-3);--va-c-danger-soft:var(--va-c-red-soft)}:root{--va-aside-width:256px;--va-sidebar-width:300px;--va-border-width:1px;--va-font-serif:"Noto Serif SC",DM Serif Display,STZhongsong,STKaiti,KaiTi,Roboto,serif;--va-font-sans:DM Sans,Inter,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;--va-font-mono:DM Mono,Menlo,Monaco,Consolas,"Courier New",monospace;--va-transition-duration-fast:.2s;--va-transition-duration:.4s;--va-transition-duration-slow:.6s;--va-transition:all var(--va-transition-duration-fast) ease-in-out}:root{--va-c-white:#fff;--va-c-black:#1a1a1a;--va-c-gray:#8e8e8e;--va-c-danger:#db2828;--va-c-warning:#f2711c;--va-c-text-light-1:#213547;--va-c-text-light-2:rgba(60, 60, 60, .7);--va-c-text-light-3:rgba(60, 60, 60, .33);--va-c-text-light-4:rgba(60, 60, 60, .18);--va-c-text-dark-1:rgba(255, 255, 255, .87);--va-c-text-dark-2:rgba(235, 235, 235, .6);--va-c-text-dark-3:rgba(235, 235, 235, .38);--va-c-text-dark-4:rgba(235, 235, 235, .18);--va-c-primary-light:rgb(3.9, 134.3415584416, 255);--va-c-primary-lighter:rgb(31.8, 147.7480519481, 255);--va-c-primary-dark:rgb(0, 108, 207.9);--va-c-primary:#0078e7}:root{color-scheme:light;--va-c-brand:#0078e7;--va-border-color:#222;--va-c-text:#333;--va-c-text-light:#555;--va-c-text-lighter:#666;--va-c-text-dark:#111;--va-c-primary-rgb:0,120,231;--va-c-link:var(--va-c-primary-dark)}:root{--va-c-text-1:rgba(60, 60, 67);--va-c-text-2:rgba(60, 60, 67, .78);--va-c-text-3:rgba(60, 60, 67, .56)}:root{--va-c-bg:#ffffff;--va-c-bg-light:#ffffff;--va-c-bg-dark:#fafafa;--va-c-bg-opacity:rgba(255, 255, 255, .8);--va-c-bg-soft:#f9f9f9;--va-c-bg-alt:#f9f9f9;--va-c-bg-mute:#f1f1f1}:root{--va-code-line-height:1.7;--va-code-font-size:.875em;--va-code-block-color:var(--va-c-text-2);--va-code-block-bg:var(--va-c-bg-alt);--va-code-block-divider-color:var(--va-c-gutter);--va-code-lang-color:var(--va-c-text-3);--va-code-line-highlight-color:var(--va-c-default-soft);--va-code-line-number-color:var(--va-c-text-3);--va-code-line-diff-add-color:var(--va-c-green-soft);--va-code-line-diff-add-symbol-color:var(--va-c-green-1);--va-code-line-diff-remove-color:var(--va-c-red-soft);--va-code-line-diff-remove-symbol-color:var(--va-c-red-1);--va-code-line-warning-color:var(--va-c-yellow-soft);--va-code-line-error-color:var(--va-c-red-soft);--va-code-copy-code-border-color:var(--va-c-divider);--va-code-copy-code-bg:var(--va-c-bg-soft);--va-code-copy-code-hover-border-color:var(--va-c-divider);--va-code-copy-code-hover-bg:var(--va-c-bg);--va-code-copy-code-active-text:var(--va-c-text-2);--va-code-copy-copied-text-content:"Copied";--va-code-tab-divider:var(--va-code-block-divider-color);--va-code-tab-text-color:var(--va-c-text-2);--va-code-tab-bg:var(--va-code-block-bg);--va-code-tab-hover-text-color:var(--va-c-text-1);--va-code-tab-active-text-color:var(--va-c-text-1);--va-code-tab-active-bar-color:var(--va-c-brand-1)}:root{--va-icon-copy:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' height='20' width='20' stroke='rgba(128,128,128,1)' stroke-width='2' class='h-6 w-6' viewBox='0 0 24 24'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2M9 5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2M9 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2'/%3E%3C/svg%3E");--va-icon-copied:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' height='20' width='20' stroke='rgba(128,128,128,1)' stroke-width='2' class='h-6 w-6' viewBox='0 0 24 24'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2M9 5a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2M9 5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2m-6 9 2 2 4-4'/%3E%3C/svg%3E");--va-icon-collapse:url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32' stroke='rgba(128,128,128,1)' viewBox='0%200%2024%2024'%3E%3Cpath%20fill='currentColor'%20d='m12%2016.175l3.9-3.875q.275-.275.688-.288t.712.288q.275.275.275.7t-.275.7l-4.6%204.6q-.15.15-.325.213t-.375.062q-.2%200-.375-.063T11.3%2018.3l-4.6-4.6q-.275-.275-.288-.687T6.7%2012.3q.275-.275.7-.275t.7.275l3.9%203.875Zm0-6L15.9%206.3q.275-.275.688-.287t.712.287q.275.275.275.7t-.275.7l-4.6%204.6q-.15.15-.325.213t-.375.062q-.2%200-.375-.062T11.3%2012.3L6.7%207.7q-.275-.275-.288-.688T6.7%206.3q.275-.275.7-.275t.7.275l3.9%203.875Z'/%3E%3C/svg%3E")}:root{--va-header-anchor-symbol:"#"}html{-webkit-tap-highlight-color:transparent;font-family:var(--va-font-sans)}a{color:var(--va-c-link);font-weight:500}*{outline:0}button{background-color:transparent}#app,body,html{margin:0;padding:0;line-height:2}html{background-color:var(--va-c-bg)}a{cursor:pointer}*,:after,:before{--un-rotate:0;--un-rotate-x:0;--un-rotate-y:0;--un-rotate-z:0;--un-scale-x:1;--un-scale-y:1;--un-scale-z:1;--un-skew-x:0;--un-skew-y:0;--un-translate-x:0;--un-translate-y:0;--un-translate-z:0;--un-pan-x: ;--un-pan-y: ;--un-pinch-zoom: ;--un-scroll-snap-strictness:proximity;--un-ordinal: ;--un-slashed-zero: ;--un-numeric-figure: ;--un-numeric-spacing: ;--un-numeric-fraction: ;--un-border-spacing-x:0;--un-border-spacing-y:0;--un-ring-offset-shadow:0 0 rgb(0 0 0 / 0);--un-ring-shadow:0 0 rgb(0 0 0 / 0);--un-shadow-inset: ;--un-shadow:0 0 rgb(0 0 0 / 0);--un-ring-inset: ;--un-ring-offset-width:0px;--un-ring-offset-color:#fff;--un-ring-width:0px;--un-ring-color:rgb(147 197 253 / .5);--un-blur: ;--un-brightness: ;--un-contrast: ;--un-drop-shadow: ;--un-grayscale: ;--un-hue-rotate: ;--un-invert: ;--un-saturate: ;--un-sepia: ;--un-backdrop-blur: ;--un-backdrop-brightness: ;--un-backdrop-contrast: ;--un-backdrop-grayscale: ;--un-backdrop-hue-rotate: ;--un-backdrop-invert: ;--un-backdrop-opacity: ;--un-backdrop-saturate: ;--un-backdrop-sepia: }</style><script>const locale=localStorage.getItem("valaxy-locale")||"zh-CN";document.documentElement.setAttribute("lang",locale)</script><script type="module" async crossorigin src="/assets/app.C7s_ck_O.js"></script><link rel="modulepreload" crossorigin href="/assets/framework.BJ_UGP-K.js"><link rel="modulepreload" crossorigin href="/assets/chunks/vue-router.CWHyo4u9.js"><link rel="modulepreload" crossorigin href="/assets/chunks/dayjs.Byk5cVHE.js"><link rel="modulepreload" crossorigin href="/assets/chunks/pinia.rdBI-am1.js"><link rel="modulepreload" crossorigin href="/assets/chunks/vue-i18n.CWNv2zlx.js"><link rel="modulepreload" crossorigin href="/assets/chunks/nprogress.Cino7761.js"><link rel="stylesheet" crossorigin href="/assets/app.mW8RfhGB.css" onload='this.rel="stylesheet"'><noscript><link rel="stylesheet" crossorigin href="/assets/app.mW8RfhGB.css"></noscript><link rel="modulepreload" crossorigin href="/assets/post.ByMVusQf.js"><link rel="modulepreload" crossorigin href="/assets/a4migration.Bi6lHo6e.js"><title>搭建皮肤站并实现外置登录 - 朽丘秋雨-来自klcdm美好虚拟世界</title><meta property="og:locale:alternate" content="en"><meta property="og:description" content="我天，我有多久没更新了(小两周)；浅浅的更新一下吧！主要是最近发生了一些事情搞得我心情上下起伏的，多少有点混乱...(混乱的私生活)我家今年是会海南岛和外婆他们回去过年，记得上一次过年还是在3年左右好像是？太久了忘记了，不过在和我爸妈和姑婆的对话中大概可以了解到一点点。这坐车，从中午还是上午10点出发，然后到了晚上才登船！"><meta property="og:locale" content="zh-CN"><meta property="og:site_name" content="朽丘秋雨-来自klcdm美好虚拟世界"><meta property="og:title" content="搭建皮肤站并实现外置登录"><meta property="og:image" content="https://koimg.cn-sy1.rains3.com/2024/08/28/459238.webp"><meta property="og:type" content="website"><meta property="og:url" content="https://blog.koxiuqiu.cc/"><link rel="icon" href="/favicon.png" type="image/png"><meta name="description" content="一定会和喜欢的人在夏日夜晚牵手慢步"><meta name="generator" content="Valaxy 0.22.14"><script id="check-mac-os" async>document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_AMS-Regular.BQhdFMY1.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Caligraphic-Bold.Dq_IR9rO.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Caligraphic-Regular.Di6jR-x-.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Fraktur-Bold.CL6g_b3V.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Fraktur-Regular.CTYiF6lA.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Main-Bold.Cx986IdX.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Main-BoldItalic.DxDJ3AOS.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Main-Italic.NWA7e6Wa.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Main-Regular.B22Nviop.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Math-BoldItalic.CZnvNsCZ.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Math-Italic.t53AETM-.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_SansSerif-Bold.D1sUS0GD.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_SansSerif-Italic.C3H0VqGB.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_SansSerif-Regular.DDBCnlJ7.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Script-Regular.D3wIWfF6.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Size1-Regular.mCD8mA8B.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Size2-Regular.Dy4dx90m.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="data:font/woff2;base64,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"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Size4-Regular.Dl5lxZxV.woff2"><link rel="preload" as="font" crossorigin="anonymous" href="/assets/KaTeX_Typewriter-Regular.CO6r4hn1.woff2"></head><body><div id="app" data-server-rendered="true"><!--[--><!--[--><!----><!--[--><!--]--><!----><!--]--><main><!--[--><article class="markdown-body"><!--[--><!--[--><p>皮肤站是什么？其实官网就有皮肤站，在正版用户选择正版的登录后，MC客户端就会到官方皮肤站内下载用户的皮肤。 而外置登录，就是用户在没有正版账号的情况下，使用自己的账号验证，达到用户验证的目的。</p><h1 id="本文方案" tabindex="-1">本文方案 <a class="header-anchor" href="#本文方案" aria-label="Permalink to &quot;本文方案&quot;">​</a></h1><p>适用于：</p><ul><li>Java版本Minecraft：包括Spigot、官方版本Minecraft、Forge等。</li></ul><h2 id="皮肤站" tabindex="-1">皮肤站 <a class="header-anchor" href="#皮肤站" aria-label="Permalink to &quot;皮肤站&quot;">​</a></h2><p>本文使用<a href="https://github.com/bs-community/blessing-skin-server" target="_blank" rel="noreferrer">blessing-skin-server</a>作为皮肤站，是<a href="https://mcskin.littleservice.cn/" target="_blank" rel="noreferrer">LittleSkin</a>的开源社区版本。</p><h3 id="实现效果" tabindex="-1">实现效果： <a class="header-anchor" href="#实现效果" aria-label="Permalink to &quot;实现效果：&quot;">​</a></h3><h4 id="用户角色管理" tabindex="-1">用户角色管理 <a class="header-anchor" href="#用户角色管理" aria-label="Permalink to &quot;用户角色管理&quot;">​</a></h4><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/52ypr1.png" alt="用户皮肤管理" loading="lazy" decoding="async" class="lazy"></figure><h4 id="用户皮肤管理" tabindex="-1">用户皮肤管理 <a class="header-anchor" href="#用户皮肤管理" aria-label="Permalink to &quot;用户皮肤管理&quot;">​</a></h4><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/519wl7.png" alt="选择皮肤激活" loading="lazy" decoding="async" class="lazy"></figure><h4 id="选择皮肤激活" tabindex="-1">选择皮肤激活 <a class="header-anchor" href="#选择皮肤激活" aria-label="Permalink to &quot;选择皮肤激活&quot;">​</a></h4><p>你还可以安装很多插件，实现：邀请码注册、外置登录等等功能： <img src="https://imgse.koxiuqiu.cn/i/2024/03/09/53fe02.png" alt="丰富的插件"></p><h2 id="最终效果" tabindex="-1">最终效果 <a class="header-anchor" href="#最终效果" aria-label="Permalink to &quot;最终效果&quot;">​</a></h2><p>最后实现的效果是搭建一个网站，用户可以注册账号，并登录系统进行皮肤的上传、下载以及激活皮肤为角色皮肤。 皮肤站和外置登录配合，就可以达到和正版登录一样的效果：</p><ul><li>允许用户注册账号</li><li>允许用户上传和自定义自己游戏皮肤</li></ul><h1 id="获取服务器" tabindex="-1">获取服务器 <a class="header-anchor" href="#获取服务器" aria-label="Permalink to &quot;获取服务器&quot;">​</a></h1><h2 id="这里以雨云服务器为主" tabindex="-1">这里以雨云服务器为主 <a class="header-anchor" href="#这里以雨云服务器为主" aria-label="Permalink to &quot;这里以雨云服务器为主&quot;">​</a></h2><p>前往官网：<a href="https://www.rainyun.com%E4%BC%98%E6%83%A0%E7%A0%81%EF%BC%9Avip5r" target="_blank" rel="noreferrer">https://www.rainyun.com优惠码：vip5r</a> 获取注册福利</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/06/z6o9dg.png" alt="image-20240306212709663" loading="lazy" decoding="async" class="lazy"></figure><p>进入<a href="https://app.rainyun.com/dashboard" target="_blank" rel="noreferrer">总览 | 雨云 (rainyun.com)</a>后点击<strong>云服务器</strong></p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/06/z7qdxc.png" alt="image-20240306212901452" loading="lazy" decoding="async" class="lazy"></figure><p><strong>然后点击购买云服务器</strong></p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/06/z8dtix.png" alt="image-20240306213003480" loading="lazy" decoding="async" class="lazy"></figure><p>选择合适的服务器配置，可以先进行试用后再决定购买，同时雨云支持<strong>七天无理由退款</strong></p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/06/zb5uzl.png" alt="image-20240306213430501" loading="lazy" decoding="async" class="lazy"></figure><p>选择好配置后可以直接预安装APP，你也可以不预装就单装系统,自行选择好部署方案就行</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/560qi8.png" alt="image-20240309031210280" loading="lazy" decoding="async" class="lazy"></figure><p>预安装APP的话操控服务器的面板下面会出现这个，访问外网面板地址就可以进入宝塔了，然后下面<strong>username就是账号，密码password</strong></p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/57skga.png" alt="image-20240309031501429" loading="lazy" decoding="async" class="lazy"></figure><blockquote><p>同时！雨云15000人技术交流社区，学习交流，畅所欲言，遇见技术和真知 定期发布活动和白嫖福利</p></blockquote><h1 id="部署方案" tabindex="-1">部署方案 <a class="header-anchor" href="#部署方案" aria-label="Permalink to &quot;部署方案&quot;">​</a></h1><h2 id="准备工具" tabindex="-1">准备工具 <a class="header-anchor" href="#准备工具" aria-label="Permalink to &quot;准备工具&quot;">​</a></h2><ul><li>LEMP环境：<ul><li>Linux服务器：Debian、CentOS都可以。极其不推荐使用Windows Server。</li><li>Nginx/Apache：推荐使用NNginx环境</li><li>MySQL/MariaDB：可以使用Linux服务器自己搭建，也可以直接买现成的。</li><li>PHP：PHP版本推荐7以上，本文使用PHP8（最新皮肤站需要PHP8）</li></ul></li><li>Minecraft服务器端</li></ul><h2 id="宝塔搭建" tabindex="-1">宝塔搭建 <a class="header-anchor" href="#宝塔搭建" aria-label="Permalink to &quot;宝塔搭建&quot;">​</a></h2><p>宝塔搭建Ngiinx、PHP和MariaDB/MySQL很简单，可视化搭建：</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5bto9o.png" alt="image-20240309032147519" loading="lazy" decoding="async" class="lazy"></figure><h3 id="php函数" tabindex="-1">PHP函数 <a class="header-anchor" href="#php函数" aria-label="Permalink to &quot;PHP函数&quot;">​</a></h3><p>宝塔是默认禁用了一些皮肤站需要的函数，我们需要前往软件商城进行开放</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5e3rys.png" alt="image-20240309032530686" loading="lazy" decoding="async" class="lazy"></figure><p>需要启用的函数：</p><ul><li>symlink</li><li>readlink</li><li>putenv</li><li>realpath</li></ul><p>并安装扩展：fileinfo扩展</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5ecq31.png" alt="image-20240309032608421" loading="lazy" decoding="async" class="lazy"></figure><h3 id="搭建blessingskin" tabindex="-1">搭建BlessingSkin <a class="header-anchor" href="#搭建blessingskin" aria-label="Permalink to &quot;搭建BlessingSkin&quot;">​</a></h3><p>如果不懂怎么创建一个网站可以前往：<a href="https://koxiuqiu.cn/2024/01/15/2" target="_blank" rel="noreferrer">朽丘博 - 支配生命,享受生活 (koxiuqiu.cn)</a></p><p>创建好站点，开始操作，其中：</p><ul><li>域名：有域名解析到服务器，则填域名；否则，就填IP。</li><li>PHP版本：选择PHP7.4、8.x（6.0以上版本Blessing需要使用PHP8.x）</li></ul><p>之后，进入网站根目录，下载并解压最新版本的<a href="https://github.com/bs-community/blessing-skin-server/releases" target="_blank" rel="noreferrer">BlessingSkin</a>（自己开梯子访问，或者是找人帮你吧）</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5g53mr.png" alt="image-20240309032909888" loading="lazy" decoding="async" class="lazy"></figure><p>进入后上传你下载好的压缩包，gz也是压缩包啊喂(#`O′)，然后就是如图这样的</p><p>最后，到网站设置内：</p><ul><li>设置运行目录：<strong>/public</strong></li><li>添加伪静态</li></ul><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5hz1nx.png" alt="image-20240309033219536" loading="lazy" decoding="async" class="lazy"></figure><p>伪静态：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">location / {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      try_files $uri $uri/ /index.php?$query_string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span></code></pre><button class="collapse"></button></div><p>然后就是这样的：</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5ibfe2.png" alt="image-20240309033237392" loading="lazy" decoding="async" class="lazy"></figure><p>之后，就可以访问网站了，直接访问你的域名或者是IP！</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5j3j0h.png" alt="image-20240309033409008" loading="lazy" decoding="async" class="lazy"></figure><p>记得创建好数据库！</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5k1rim.png" alt="image-20240309033527955" loading="lazy" decoding="async" class="lazy"></figure><h3 id="宝塔常见问题" tabindex="-1">宝塔常见问题 <a class="header-anchor" href="#宝塔常见问题" aria-label="Permalink to &quot;宝塔常见问题&quot;">​</a></h3><p>Q：后续初始化时候，在填入数据库信息设置管理员后，出现500错误？</p><blockquote><p>刷新页面。可能是宝塔的原因，实在不行重新安装部署一次</p></blockquote><h2 id="编译搭建" tabindex="-1">编译搭建 <a class="header-anchor" href="#编译搭建" aria-label="Permalink to &quot;编译搭建&quot;">​</a></h2><ul class="contains-task-list"><li class="task-list-item"><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> 三个小章节讲解</li></ul><h3 id="nginx" tabindex="-1">Nginx <a class="header-anchor" href="#nginx" aria-label="Permalink to &quot;Nginx&quot;">​</a></h3><p>编译安装复杂一些，首先我们下载Nginx的源码，这里我们下载1.20.1的源码，下载到Nginx的<code>/usr/local/src</code>内，并解压进入：</p><p>ssh操控进入后执行脚本</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cd /usr/local/src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">wget 'http://nginx.org/download/nginx-1.20.1.tar.gz'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">tar -xf nginx-1.20.1.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cd nginx-1.20.1</span></span></code></pre><button class="collapse"></button></div><p>什么是sshj？<a href="https://koxiuqiu.cn/2024/01/15/2/" target="_blank" rel="noreferrer">♪(^∇^*)论如何快速了解建站 | 朽丘博 (koxiuqiu.cn)</a></p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5mn15v.png" alt="image-20240309034001254" loading="lazy" decoding="async" class="lazy"></figure><p>输入脚本回车就行</p><h3 id="编译依赖" tabindex="-1">编译依赖 <a class="header-anchor" href="#编译依赖" aria-label="Permalink to &quot;编译依赖&quot;">​</a></h3><p>按需求，我们需要SSL、gzip、正则库等依赖，所以这里我们安装一下依赖（#和后面文章不要输入，一条条输入回车就行，这只是注释） Debian/Ubuntu系统：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 安装GCC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install build-essential</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 安装正则库</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install libpcre3 libpcre3-dev</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 安装gzip lib</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install zlib1g-dev</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 支持OpenSSL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install openssl libssl-dev</span></span></code></pre><button class="collapse"></button></div><p>CentOS系统：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 安装GCC</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo yum install gcc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 安装正则库</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo yum install pcre pcre-devel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 支持OpenSSL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo yum -y install openssl openssl-devel</span></span></code></pre><button class="collapse"></button></div><h4 id="预编译" tabindex="-1">预编译 <a class="header-anchor" href="#预编译" aria-label="Permalink to &quot;预编译&quot;">​</a></h4><p>首先，我们想要把Nginx以www:www用户运行，所以我这里创建一个www用户，附属于www用户组：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 创建一个www用户</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo useradd www</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 创建一个www用户组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo groupadd www</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># www用户归属于www用户组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo usermod -a -G www www</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">LIVECODESERVER</span></span></code></pre><button class="collapse"></button></div><p>之后，开始预编译：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">./configure \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--prefix=/usr/local/nginx \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--user=www \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--group=www \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--sbin-path=/usr/local/nginx/sbin/nginx \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--conf-path=/usr/local/nginx/nginx.conf \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--error-log-path=/var/log/nginx/error.log \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--http-log-path=/var/log/nginx/access.log \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--pid-path=/var/run/nginx.pid \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--lock-path=/var/run/nginx.lock \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--http-client-body-temp-path=/var/cache/nginx/client_temp \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--http-proxy-temp-path=/var/cache/nginx/proxy_temp \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--http-scgi-temp-path=/var/cache/nginx/scgi_temp \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-file-aio \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-threads \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_addition_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_auth_request_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_dav_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_flv_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_gunzip_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_gzip_static_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_mp4_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_random_index_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_realip_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_secure_link_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_slice_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_ssl_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_stub_status_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_sub_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-http_v2_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-mail \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-mail_ssl_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-stream \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-stream_realip_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-stream_ssl_module \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-stream_ssl_preread_module</span></span></code></pre><button class="collapse"></button></div><h4 id="编译和安装" tabindex="-1">编译和安装 <a class="header-anchor" href="#编译和安装" aria-label="Permalink to &quot;编译和安装&quot;">​</a></h4><p>之后，我们开始编译和安装：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 我服务器是四核，所以-j4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">make -j4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 编译完成，进行安装</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">make install</span></span></code></pre><button class="collapse"></button></div><h4 id="注册服务" tabindex="-1">注册服务 <a class="header-anchor" href="#注册服务" aria-label="Permalink to &quot;注册服务&quot;">​</a></h4><p>如果你是用我的编译参数，那么需要创建一个日志目录：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 创建日志目录</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo mkdir /var/cache/nginx</span></span></code></pre><button class="collapse"></button></div><p>为了之后更方便启动，我注册为服务：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">vim /usr/lib/systemd/system/nginx.service</span></span></code></pre><button class="collapse"></button></div><p>添加内容：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[Unit]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Description=nginx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">After=network.target</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[Service]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Type=forking</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ExecStart=/usr/local/nginx/sbin/nginx</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ExecReload=/usr/local/nginx/sbin/nginx -s reload</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ExecStop=/usr/local/nginx/sbin/nginx -s quit</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">PrivateTmp=true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[Install]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">WantedBy=multi-user.target</span></span></code></pre><button class="collapse"></button></div><p>最后进行启动即可</p><h3 id="php" tabindex="-1">PHP <a class="header-anchor" href="#php" aria-label="Permalink to &quot;PHP&quot;">​</a></h3><p>PHP会比较麻烦，主要是依赖问题，根据<a href="https://blessing.netlify.app/setup.html" target="_blank" rel="noreferrer">Blessing Skin安装指南</a>，我们需要PHP支持：</p><ul><li>OpenSSL</li><li>PDO</li><li>Mbstring</li><li>Tokenizer</li><li>GD</li><li>XML</li><li>Ctype</li><li>JSON</li><li>fileinfo</li><li>zip</li></ul><p>主要是GD模块，需要很多额外参数，尤其是<code>freetype</code>参数，所以这里编译需要注意。</p><h4 id="下载php源码" tabindex="-1">下载PHP源码 <a class="header-anchor" href="#下载php源码" aria-label="Permalink to &quot;下载PHP源码&quot;">​</a></h4><p>首先，还是和刚刚一样，我们需要下载PHP7.4的源码到<code>/usr/local/src</code>下：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 当前为root用户</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cd /usr/local/src</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">wget 'https://www.php.net/distributions/php-7.4.22.tar.gz'</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">tar -xf php-7.4.22.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cd php-7.4.22</span></span></code></pre><button class="collapse"></button></div><h4 id="编译依赖-1" tabindex="-1">编译依赖 <a class="header-anchor" href="#编译依赖-1" aria-label="Permalink to &quot;编译依赖&quot;">​</a></h4><p>我们编译依赖很简单，需要支援Nginx和MariaDB/MySQL，同时支持gd等模块，所以： 如果你是Debian/Ubuntu：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 安装pkg-config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install pkg-config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># OpenSSL的支持</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install openssl libssl-dev</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># SQL支持</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install libsqlite3-dev </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># zlib</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install zlib1g-dev</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># OpenSSL支持</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install libcurl4-openssl-dev</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># GD辅助依赖</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo apt-get install libpng-dev libjpeg-dev libonig-dev</span></span></code></pre><button class="collapse"></button></div><p>之后，编译安装：<a href="http://xmlsoft.org/sources" target="_blank" rel="noreferrer">libxml2</a>、<a href="http://mirror.yongbok.net/nongnu/freetype" target="_blank" rel="noreferrer">freetype</a>。 并把freetype编译安装地址下的lib/pkgconfig添加到pkg内，如：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#  Freetype</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">export PKG_CONFIG_PATH=/usr/local/freetype/lib/pkgconfig/</span></span></code></pre><button class="collapse"></button></div><p>如果你是CentOS： 首先是编译安装<a href="https://github.com/kkos/oniguruma" target="_blank" rel="noreferrer">oniguruma</a>，并配置到pkg内，如：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">#  Freetype</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">export PKG_CONFIG_PATH=/usr/local/freetype/lib/pkgconfig/</span></span></code></pre><button class="collapse"></button></div><p>之后用软件包管理器安装：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># XML 库</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo yum install libxml2 libxml2-devel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 正则库</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo yum install pcre pcre-devel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># SQL 库</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo yum install sqlite3-devel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 一些lib</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo yum install libcurl-devel libpng-devel libjpeg-devel</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># GD 依赖</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo yum install freetype-devel</span></span></code></pre><button class="collapse"></button></div><h4 id="预编译-1" tabindex="-1">预编译 <a class="header-anchor" href="#预编译-1" aria-label="Permalink to &quot;预编译&quot;">​</a></h4><p>最后，我们看看预编译PHP：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">./configure \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--prefix=/usr/local/php7 \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-curl \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-mysqli \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-openssl \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-pdo-mysql \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-jpeg \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--enable-gd \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--enable-fpm \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-fpm-user=www \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-fpm-group=www \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--enable-bcmath \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--enable-xml \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-zip \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--enable-mbstring \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--enable-sockets  \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-zlib   \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--enable-fileinfo \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--enable-exif \</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">--with-freetype</span></span></code></pre><button class="collapse"></button></div><h4 id="编译和安装-1" tabindex="-1">编译和安装 <a class="header-anchor" href="#编译和安装-1" aria-label="Permalink to &quot;编译和安装&quot;">​</a></h4><p>之后，我们开始编译和安装：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 我服务器是四核，所以-j4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">make -j4</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 编译完成，进行安装</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">make install</span></span></code></pre><button class="collapse"></button></div><h4 id="注册服务-1" tabindex="-1">注册服务 <a class="header-anchor" href="#注册服务-1" aria-label="Permalink to &quot;注册服务&quot;">​</a></h4><p>如果你是用我的编译参数，那么需要PHP-FPM配置文件：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"># 创建配置文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo mv /usr/local/php7/etc/php-fpm.conf.default /usr/local/php7/etc/php-fpm.conf</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo mv /usr/local/php7/etc/php-fpm.d/www.conf.default /usr/local/php7/etc/php-fpm.d/www.conf</span></span></code></pre><button class="collapse"></button></div><p>为了之后更方便启动，我注册为服务：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">sudo vim /usr/lib/systemd/system/php-fpm.service</span></span></code></pre><button class="collapse"></button></div><p>添加内容：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[Unit]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Description=php-fpm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">After=network.target</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[Service]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Type=forking</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">ExecStart=/usr/local/php7/sbin/php-fpm</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">PrivateTmp=true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[Install]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">WantedBy=multi-user.target</span></span></code></pre><button class="collapse"></button></div><p>最后启动即可！</p><h3 id="mariadb-mysql" tabindex="-1">MariaDB/MySQL <a class="header-anchor" href="#mariadb-mysql" aria-label="Permalink to &quot;MariaDB/MySQL&quot;">​</a></h3><h4 id="搭建blessingskin-1" tabindex="-1">搭建BlessingSkin <a class="header-anchor" href="#搭建blessingskin-1" aria-label="Permalink to &quot;搭建BlessingSkin&quot;">​</a></h4><p>首先，我们创建一个目录，作为网站目录：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">mkdir /www/BlessingSkin -pv</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cd /www/BlessingSkin</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">AWK</span></span></code></pre><button class="collapse"></button></div><p>之后，下载<a href="https://github.com/bs-community/blessing-skin-server/releases" target="_blank" rel="noreferrer">BlessingSkin的发行版本</a>，这里选择安装<code>6.0.0-beta.3</code>:</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">wget 'https://github.com/bs-community/blessing-skin-server/releases/download/6.0.0-beta.3/blessing-skin-server-6.0.0-beta.3.zip'</span></span></code></pre><button class="collapse"></button></div><p>之后解压即可：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">unzip blessing-skin-server-6.0.0-beta.3.zip</span></span></code></pre><button class="collapse"></button></div><p>安装官网要求，需要重命名和初始化：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cp .env.example .env</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">/usr/local/php7/bin/php artisan key:generate</span></span></code></pre><button class="collapse"></button></div><h4 id="配置nginx" tabindex="-1">配置Nginx <a class="header-anchor" href="#配置nginx" aria-label="Permalink to &quot;配置Nginx&quot;">​</a></h4><p>当然，我们还要配置Nginx：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">vim /usr/local/nginx/nginx.conf</span></span></code></pre><button class="collapse"></button></div><p>查看：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">user  www;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">worker_processes  1;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">events {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    worker_connections  1024;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">http {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    include       mime.types;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    default_type  application/octet-stream;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    sendfile        on;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    keepalive_timeout  65;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    gzip  on;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    server {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        listen       80;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        server_name  localhost;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        root /www/BlessingSkin/public;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        location / {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            index  index.php index.html index.htm;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        try_files $uri $uri/ /index.php?$query_string;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        error_page   500 502 503 504  /50x.html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        location = /50x.html {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            root   html;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        # php-fpm配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        location ~ [^/]\.php(/|$){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            # try_files $uri =404;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            fastcgi_pass  127.0.0.1:9000;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            include fastcgi.conf;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            fastcgi_index  index.php;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">            fastcgi_param  SCRIPT_FILENAME  $document_root/$fastcgi_script_name;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre><button class="collapse"></button></div><h4 id="提权-重载配置" tabindex="-1">提权&amp;重载配置 <a class="header-anchor" href="#提权-重载配置" aria-label="Permalink to &quot;提权&amp;重载配置&quot;">​</a></h4><p>刚刚我们都是用<code>root</code>用户直接修改文件，现在我们把网站目录权限移交给www：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">chown www:www /www -R</span></span></code></pre><button class="collapse"></button></div><p>最后，我们重载配置：</p><div class="language-html vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">systemctl reload nginx</span></span></code></pre><button class="collapse"></button></div><p>然后访问站点就可以成功部署</p><h1 id="外置登录" tabindex="-1">外置登录 <a class="header-anchor" href="#外置登录" aria-label="Permalink to &quot;外置登录&quot;">​</a></h1><p>使用外置登录，服务器的配置文件(server.properties)的online-mode记得设置为<code>true</code>，这是服务器的正版验证</p><p>直接下载我已经整合好的插件压缩包，下载：<a href="https://pan.baidu.com/s/1LfIe7bAJSoLDgIvBKnOtMQ?pwd=dcxu" target="_blank" rel="noreferrer">传送门</a></p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5vko5y.png" alt="image-20240309035504746" loading="lazy" decoding="async" class="lazy"></figure><p>把你下载的压缩包中的文件夹上传在这个目录中就行</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5w3ma2.png" alt="image-20240309035553142" loading="lazy" decoding="async" class="lazy"></figure><p>然后可以直接全部勾选，进行下一步</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/5ws2nv.png" alt="image-20240309035707077" loading="lazy" decoding="async" class="lazy"></figure><p>然后红框内就是我们需要的API链接</p><p>其次，我们需要设置我们的 Java Minecraft服务器的启动命令，先下载最新版本的<code>authlib-injector.jar</code>，下载地址：</p><ul><li><a href="https://authlib-injector.yushi.moe/" target="_blank" rel="noreferrer">authlib-injector下载</a></li></ul><p>之后，我们回到我们Minecraft的启动界面，如果你之前的Minecraft服务器启动命令是：（例子）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span>java -jar -Xms1024M -Xmx5120M LoliServer-1.12.2server.jar</span></span></code></pre><button class="collapse"></button></div><p>那么，加上<code>authlib-injector</code>验证就是：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span>java -jar -Xms1024M -Xmx5120M -javaagent:authlib-injector-1.1.39.jar=http://URL LoliServer-1.12.2server.jar</span></span></code></pre><button class="collapse"></button></div><p>其中：</p><ul><li>authlib-injector-1.1.39.jar：这个需要替换为你刚刚下载的<code>authlib-injector</code>版本。</li><li>=http:：为上文YggdrasilAPI地址。</li></ul><p>接下来，我们到客户端上，就可以使用外置登录了，如果是PCL了，直接皮肤站一键添加</p><figure><img src="https://imgse.koxiuqiu.cn/i/2024/03/09/6mfqtx.png" alt="image-20240309040013738" loading="lazy" decoding="async" class="lazy"></figure><p>如果是HMCL，我们到客户单上设置，以HCML为例，我们打开HMCL后，在登录里选择外置登录： <img src="https://imgse.koxiuqiu.cn/i/2024/03/09/6n2uil.png" alt="image-20240309040134135"></p><ul><li>验证服务器：我们的<code>Yggdrasil API</code>地址</li><li>用户名：我们自己皮肤站上注册的用户</li><li>密码：我们自己皮肤站上的账号密码</li></ul><blockquote><p>记得创建好角色</p></blockquote><h1 id="结尾小言" tabindex="-1">结尾小言 <a class="header-anchor" href="#结尾小言" aria-label="Permalink to &quot;结尾小言&quot;">​</a></h1><p>最后，如果你还有什么不懂的地方：</p><ul><li>懂得谦卑的人，不要张口就来</li><li>懂得合理利用搜索引擎</li><li>懂得不要一直伸手要</li></ul><blockquote><p>符合并且荔枝的，可以直接评论我求助！</p></blockquote><!--]--><!--[--><!--]--><!--]--><!----><!----></article><!--]--></main><!--]--></div><script>window.__INITIAL_STATE__='{"pinia":{}}'</script></body></html>